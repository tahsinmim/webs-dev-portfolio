"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1178],{37765:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(52322),l=n(7339),a=n(94951),i=n(17581);n(39515),n(62159),n(23171);var s=(0,n(46724).c)({defaultClassName:"_fsmm4n4 _1286nb12if _1286nb128f _1286nb1239 _1286nb12d9 _1286nb16os _1286nb18l _1286nb12t3 _1286nb12tb",variantClassNames:{type:{danger:"_1286nb1821",info:"_1286nb176j",success:"_1286nb17xj"}},defaultVariants:{},compoundVariants:[]});let o=e=>{let{onClose:t,button:n,children:o,icon:c,permanent:u,type:d}=e;return(0,r.jsxs)(l.x,{className:s({type:d}),children:[c&&(0,r.jsx)(l.x,{display:{default:"none",sm:"inline-block"},children:(0,r.jsx)(a.J,{as:c,marginRight:"10",display:"block"})}),(0,r.jsxs)(l.x,{flex:"1",display:{default:"block",sm:"flex"},alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(l.x,{as:"p",marginRight:{default:"0",sm:"15"},marginBottom:{default:"5",sm:"0"},children:o}),n]}),!u&&(0,r.jsx)(l.x,{as:"button",padding:"5",marginRight:"-5",color:"white",onClick:t||void 0,children:(0,r.jsx)(a.J,{as:i.Z,marginLeft:"10"})})]})}},54928:function(e,t,n){n.d(t,{t:function(){return s}});var r=n(2784),l=n(53476),a=n(16783),i=n(39145);let s=()=>{let e=(0,l.Zl)(i.IT);return(0,r.useCallback)(t=>{a.s.set(t),e(t)},[e])}},16783:function(e,t,n){n.d(t,{s:function(){return a}});var r=n(45579);let l="user/wallet",a={get:()=>{try{let e=localStorage.getItem(l);if(!e)return null;return r.U1.parse(JSON.parse(e))}catch(e){return null}},set:e=>{localStorage.setItem(l,JSON.stringify(e))},remove:()=>{localStorage.removeItem(l)}}},66485:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(38912);let l="session/xhr/device-manager/identify",a=(()=>{let e=()=>{try{let e=localStorage.getItem(l);if(!e)return null;return r.h.parse(JSON.parse(e))}catch(e){return null}};return{get:e,set:e=>localStorage.setItem(l,JSON.stringify(e)),remove:()=>localStorage.removeItem(l),isDeviceBlocked:()=>{var t;return null===(t=e())||void 0===t?void 0:t.disabled}}})()},80050:function(e,t,n){n.d(t,{en:function(){return h},Il:function(){return j},qx:function(){return b}});var r=n(52322),l=n(50039),a=n(37765),i=n(3785),s=n(7415),o=n(4689),c=n(53476),u=n(66485);let d=(0,c.cn)({key:"deviceIdentifyState",default:void 0,effects:[e=>{let{onSet:t}=e;t(e=>{if(!e){u.Z.remove();return}u.Z.set(e)})}]}),f=(0,c.cn)({key:"deviceBlockedModalState",default:!1}),m=(0,c.nZ)({key:"isDeviceBlocked",get:e=>{let{get:t}=e,n=t(d);return!!n&&n.disabled}}),b=()=>{let[e,t]=(0,c.FV)(f),n=(0,c.sJ)(m);return{isDeviceBlocked:(0,o.Aw)("DEVICE_LIMIT_BLOCK")&&n,isOpenDeviceBlockedModal:e,showDeviceBlockedModal:()=>t(!0),hideDeviceBlockedModal:()=>t(!1)}};var g=n(7339),p=n(94951),_=n(86903);n(39515),n(62159);let v=()=>{let{t:e}=(0,s.$G)("detail"),{isOpenDeviceBlockedModal:t,hideDeviceBlockedModal:n}=b();return(0,r.jsx)(_.u,{size:"sm",open:t,onOpenChange:n,children:(0,r.jsxs)(g.x,{textAlign:"center",children:[(0,r.jsxs)("div",{className:"_1286nb12nf _1286nb12r3 _1286nb18l _1286nb12t9 _1286nb12tx _1286nb16ea",children:[(0,r.jsx)(p.J,{as:i.Z,size:"2xl",className:"_1286nb11h9 _1286nb168s"}),e("deviceBlocked.title")]}),(0,r.jsx)("p",{className:"_1286nb11af _1286nb11p3 _1286nb12nr _1286nb16ea _1286nb12s3",children:e("deviceBlocked.description")}),(0,r.jsx)(l.gg,{as:"a",href:"/user/device-manager",children:e("deviceBlocked.button")})]})})},h=()=>{let{t:e}=(0,s.$G)("common"),t="danger",{isDeviceBlocked:n}=b();if(!n)return null;let o=(0,r.jsx)(l.gg,{size:"sm",color:t,href:"/user/device-manager",children:e("downloadsDisabled.button")});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.b,{type:t,button:o,icon:i.Z,permanent:!0,children:[(0,r.jsx)("strong",{children:e("downloadsDisabled.title")})," ",e("downloadsDisabled.description")]}),(0,r.jsx)(v,{})]})};var z=n(21805),w=n(2784),x=n(38912);let y=async()=>{let e=await fetch("/user/device-manager/identify",{headers:{"Content-Type":"application/json","X-CSRF-TOKEN":z.Z.get("csrf_freepik")||"","X-Requested-With":"XMLHttpRequest"},method:"POST"});if(!e.ok)throw Error("Error checking user device data.");let t=await e.json();return x.I.parse(t)},j=e=>{let{children:t}=e,n=(0,c.Zl)(d);return(0,w.useEffect)(()=>{let e=async()=>{let e=new Date().getTime(),t={disabled:!1,expiry:e+18e5},n=u.Z.get();if(n&&n.expiry>e)return n;try{let e=await y();t.disabled=e.success&&e.disabled}catch(e){console.error("Error getting device manager status",e)}finally{u.Z.set(t)}return t};z.Z.get("GRID")&&e().then(n)},[n]),(0,r.jsx)(r.Fragment,{children:t})}},38912:function(e,t,n){n.d(t,{I:function(){return l},h:function(){return a}});var r=n(30195);let l=r.z.object({csrfToken:r.z.string().optional(),success:r.z.boolean(),disabled:r.z.boolean()}),a=r.z.object({disabled:r.z.boolean(),expiry:r.z.number()})},28092:function(e,t,n){n.d(t,{J$:function(){return u},WH:function(){return d},fs:function(){return o},nW:function(){return a}});var r=n(30195);let l={a:"avatar",cce:"cc_will_expire",d:"downloads",dr:"download_limit_renew",e:"email",fbfi:"first_buy_fr",id:"id",l:"login",ld:"limit_downloads",nl:"newsletter",pm:"premium",pmt:"premiumtest",rcfi:"renewal_canceled_flaticon",rcfp:"renewal_canceled_freepik",rcpp:"renewal_canceled_plus",rn:"real_name",ug:"user_age",utfi:"user_type_fi",utfr:"user_type_fr",pch:"purchases",w:"wallet_id"},a=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return{...e,[r]:n}},{}),i=r.z.object({id:r.z.string(),status:r.z.string(),product:r.z.string()}),s=r.z.object({avatar:r.z.string(),email:r.z.string(),id:r.z.number(),login:r.z.string(),real_name:r.z.string().nullable(),premium:r.z.boolean().default(!1),premiumtest:r.z.boolean().default(!1),cc_will_expire:r.z.boolean().default(!1),downloads:r.z.number(),renewal_canceled_freepik:r.z.boolean().default(!1),renewal_canceled_flaticon:r.z.boolean().default(!1),renewal_canceled_plus:r.z.boolean().default(!1),limit_downloads:r.z.number(),user_age:r.z.string().optional(),user_type_fr:r.z.string().optional(),newsletter:r.z.boolean().default(!1),download_limit_renew:r.z.number().optional().nullable(),purchases:r.z.array(i).optional(),wallet_id:r.z.string().optional().nullable()}),o=r.z.object({success:r.z.literal(!0),data:s,csrfToken:r.z.string()}).transform(e=>{let{data:t}=e;return t});r.z.object({data:r.z.array(i),csrfToken:r.z.string().optional()}).transform(e=>{let{data:t}=e;return t});let c=Object.keys(s.shape).reduce((e,t)=>({...e,[a[t]]:s.shape[t]}),{}),u=r.z.object(c).transform(e=>Object.entries(e).reduce((e,t)=>{let[n,r]=t;return{...e,[l[n]]:r}},{})),d=r.z.object({expiry:r.z.number().refine(e=>e>Date.now()),value:r.z.string()})},38985:function(e,t,n){n.d(t,{f:function(){return s}});var r=n(28092);let l="session/user",a="downloads/consumed",i="downloads/limit",s=(()=>{let e;let t=()=>{let t=Date.now();return e&&e.expiry>t?e.value:null},n=()=>{try{let t=localStorage.getItem(l);if(!t)return null;let n=r.WH.parse(JSON.parse(t)),a=r.J$.parse(JSON.parse(n.value));return e={value:a,expiry:n.expiry},a}catch(e){return null}},s=()=>t()||n(),o=t=>{if("id"in t){let n=Date.now()+36e5;e={value:t,expiry:n};let a=Object.keys(t).reduce((e,n)=>(e[r.nW[n]]=t[n],e),{});localStorage.setItem(l,JSON.stringify({value:JSON.stringify(a),expiry:n}))}localStorage.setItem(a,"".concat(t.downloads)),localStorage.setItem(i,"".concat(t.limit_downloads))};return{get:s,getValue:e=>{let t=s();return t?t[e]:null},set:o,update:e=>{let t=s();t&&o({...t,...e})},remove:()=>{localStorage.removeItem(l),localStorage.removeItem(a),localStorage.removeItem(i),sessionStorage.removeItem("user/purchases")}}})()}}]);